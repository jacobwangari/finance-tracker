<h2 class="mb-4"><i class="bi bi-speedometer2"></i> Dashboard</h2>

<div class="row mb-4">
  <div class="col-md-4">
    <div class="card bg-success text-white">
      <div class="card-body">
        <h5 class="card-title"><i class="bi bi-arrow-up-circle"></i> Total Income</h5>
        <h2 class="mb-0">{{formatCurrency totalIncome}}</h2>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card bg-danger text-white">
      <div class="card-body">
        <h5 class="card-title"><i class="bi bi-arrow-down-circle"></i> Total Expenses</h5>
        <h2 class="mb-0">{{formatCurrency totalExpenses}}</h2>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card {{#if (eq balance 0)}}bg-secondary{{else}}{{#if balance}}bg-primary{{else}}bg-warning{{/if}}{{/if}} text-white">
      <div class="card-body">
        <h5 class="card-title"><i class="bi bi-wallet2"></i> Balance</h5>
        <h2 class="mb-0">{{formatCurrency balance}}</h2>
      </div>
    </div>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0"><i class="bi bi-pie-chart"></i> Expenses by Category</h5>
      </div>
      <div class="card-body">
        <canvas id="expenseChart"></canvas>
        <div id="expenseData" data-expenses="{{expensesByCategory}}" style="display: none;"></div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="bi bi-clock-history"></i> Recent Transactions</h5>
        <a href="/transactions" class="btn btn-sm btn-primary">View All</a>
      </div>
      <div class="card-body">
        {{#if transactions}}
          <div class="list-group">
            {{#each transactions}}
              <div class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">{{description}}</h6>
                    <small class="text-muted">
                      <i class="bi bi-tag"></i> {{category}} â€¢ 
                      <i class="bi bi-calendar"></i> {{formatDate date}}
                    </small>
                  </div>
                  <div>
                    <span class="badge {{#if (eq type 'income')}}bg-success{{else}}bg-danger{{/if}} fs-6">
                      {{#if (eq type 'income')}}+{{else}}-{{/if}}{{formatCurrency amount}}
                    </span>
                  </div>
                </div>
              </div>
            {{/each}}
          </div>
        {{else}}
          <p class="text-muted text-center">No transactions yet. <a href="/transactions/add">Add your first transaction</a></p>
        {{/if}}
      </div>
    </div>
  </div>
</div>

<div class="text-center">
  <a href="/transactions/add" class="btn btn-primary btn-lg">
    <i class="bi bi-plus-circle"></i> Add New Transaction
  </a>
</div>